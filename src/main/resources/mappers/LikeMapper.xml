<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 
	 <mapper namespace="com.sns.like.mapper.LikeMapper">
	 
	 	<select id="selectLikeByUserIdPostId" parameterType="map" resultType="com.sns.like.domain.Like">
	 		SELECT
	 			`postId`
	 			,`userId`
	 			,`createdAt`
	 		FROM
	 			`like`
	 		WHERE
	 			`userId` = #{userId}
	 		AND
	 			`postId` = #{postId}
	 	</select>
	 	
	 	<select id="selectLikeByPostId" parameterType="int" resultType="com.sns.like.domain.Like">
	 		SELECT
	 			`postId`
	 			,`userId`
	 			,`createdAt`
	 		FROM
	 			`like`
	 		WHERE
	 			`postId` = #{postId}
	 	</select>
	 
	 	<insert id="insertLike" parameterType="map">
	 		INSERT INTO `like`
	 		(
	 			`userId`
				,`postId`
				,`createdAt`
	 		)
	 		VALUES
	 		(
	 			#{userId}
				, #{postId}
				, NOW()
	 		)
 		</insert>
	 
	 	<delete id="deleteLike" parameterType="map">
	 		DELETE
			FROM	
				`like`
			WHERE
	 			`userId` = #{userId}
	 		AND
	 			`postId` = #{postId}
	 	</delete>
	 
	 </mapper>